<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="dd52395d-38da-4f0d-94f4-785ddbcc2e11" activeEnvironment="Default" name="APM" resourceRoot="" soapui-version="5.5.0" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="453f6f08-3dac-4023-b78f-369bda78a6de" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://localhost:54905" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#ServiceEndpointVisit}</con:endpoint></con:endpoints><con:resource name="Owners" path="/owners" id="f3b3abe1-ca43-4eac-81f7-4e8767eed107"><con:settings/><con:parameters/><con:resource name="pets" path="{ownerId}/pets" id="152783e8-03ee-462c-ba6c-d87a9738a79c"><con:settings/><con:parameters><con:parameter><con:name>ownerId</con:name><con:value>ownerId</con:value><con:style>TEMPLATE</con:style><con:default>ownerId</con:default></con:parameter></con:parameters><con:method name="Add Pet" id="dd10a107-1330-48b3-b7a7-07baa7aba830" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:pets="http://localhost/owners/1/pets">pets:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="7eea3ed4-6832-4d78-af3a-b286b99e6d01" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:60660</con:endpoint><con:request>{
	"name": "choupi",
	"birthDate": "2010-04-04"
}</con:request><con:originalUri>http://localhost/owners/1/pets</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="{petId}" path="*/pets/{petId}" id="c29a3272-d199-4f7c-9419-55c4126d1d3e"><con:settings/><con:parameters><con:parameter><con:name>petId</con:name><con:value>3</con:value><con:style>TEMPLATE</con:style><con:default>3</con:default></con:parameter></con:parameters><con:method name="View Visit" id="ad00c8c8-05fa-4188-b36c-206db2098705" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500 404</con:status><con:params/><con:element xmlns:ns="http://localhost/owners/*/pets/2">ns:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/owners/*/pets/2">ns:Response</con:element></con:representation><con:request name="Request 1" id="021a2a01-521a-4313-8020-18996f67a832" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:60660</con:endpoint><con:request/><con:originalUri>http://localhost/owners/*/pets/2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="petId" value="petId" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:method name="Post Owner" id="ab1bc5b4-eaa4-4970-900e-2d2f83f2bc55" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>400 415 500</con:status><con:params/><con:element xmlns:own="http://localhost/owners">own:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>201</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:own="http://localhost/owners">own:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="eaf28112-a253-4129-8525-40ea449ac0d8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:60660</con:endpoint><con:request>{
	"firstName": "Diogene",
	"lastName": "MOULRON",
	"address": "1 rue philippe le Bel",
	"city": "Orleans",
	"telephone": "000000000"
}
</con:request><con:originalUri>http://localhost/owners</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method><con:method name="Get Owners" id="ace43af2-138c-4153-a05f-6b69c77a3afc" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="5a8a9992-1e30-4c57-a507-c749d362cf41" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:65321</con:endpoint><con:request/><con:originalUri>http://localhost/owners</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="petTypes" path="/petTypes" id="87ef4c09-8ccc-49d1-ae4a-699ea3123ff1"><con:settings/><con:parameters/><con:method name="Get pettype" id="c981cb2f-6c31-475a-95e7-540a01fbb3d3" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="7503c985-5c78-4c59-88a2-a02d5546a77f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${#Project#ServiceEndpointVisit}</con:endpoint><con:request/><con:originalUri>http://localhost/petTypes</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="867534fc-e30c-4267-a3d1-553b9b17e787" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://localhost:54778" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#ServiceEndpointOwner}</con:endpoint></con:endpoints><con:resource name="visits" path="/owners/*/pets/{petId}/visits" id="3ab065ad-dbee-4908-96dc-8513447495e8"><con:settings/><con:parameters><con:parameter><con:name>petId</con:name><con:value>petId</con:value><con:style>TEMPLATE</con:style><con:default>petId</con:default></con:parameter></con:parameters><con:method name="Add visit" id="d1bcc479-b382-4a97-ad76-0da95d2f7f29" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="93780ffd-5837-40f7-89d5-f048b8260cd0" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:54778</con:endpoint><con:request>{
	"date": "2020-05-25",
	"description": "RAS"
}
</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="622bcf31-60e2-44d5-807c-382cc5366519" name="TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b2a29908-f468-44c6-9f62-81b5282c662e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="af06d368-b715-4e97-9504-a60fc87ee531"><con:settings/><con:config><script>def Cities= ["London", "NY", "Berlin", "Orléans", "Paris"]

def generator = { String alphabet, int n -> new Random().with {(1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()} }
randomFirstName = generator( (('A'..'Z')+('0'..'9')+('a'..'z')).join(), 15 )
randomLastName = generator( (('A'..'Z')+('0'..'9')+('a'..'z')).join(), 15 )
randomCity = generator( (('A'..'Z')+('0'..'9')+('a'..'z')).join(), 15 )
randomAdress = generator( (('0'..'9')).join(), 1 ) + " rue " +  generator( (('A'..'Z')+('0'..'9')+('a'..'z')).join(), 15 )
randomTel = generator( (('0'..'9')).join(), 9 )

randomDescription = generator( (('A'..'Z')+('0'..'9')+('a'..'z')+(' ')).join(), 15 )
randomVisitDate = "2010-0" + generator( (('0'..'9')).join(), 1 ) + "-0" + generator( (('0'..'9')).join(), 1 )

randomPetName = generator( (('A'..'Z')+('a'..'z')).join(), 8 )
randomDate = "2010-0" + generator( (('0'..'9')).join(), 1 ) + "-0" + generator( (('0'..'9')).join(), 1 )

testRunner.getTestCase().setPropertyValue("randomFirstName", randomFirstName);
testRunner.getTestCase().setPropertyValue("randomLastName", randomLastName);
testRunner.getTestCase().setPropertyValue("randomCity", randomCity);
testRunner.getTestCase().setPropertyValue("randomTel", randomTel);
testRunner.getTestCase().setPropertyValue("randomAdress", randomAdress);
testRunner.getTestCase().setPropertyValue("randomPetName", randomPetName);
testRunner.getTestCase().setPropertyValue("randomDate", randomDate);
testRunner.getTestCase().setPropertyValue("randomVisitDate", randomVisitDate);
testRunner.getTestCase().setPropertyValue("randomDescription", randomDescription);</script></con:config></con:testStep><con:testStep type="restrequest" name="Add owner" id="649140df-542a-4cf3-8fd1-97bff3c563b0"><con:settings/><con:config service="http://localhost:54905" methodName="Post Owner" resourcePath="/owners" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Add owner" id="08290e83-cc20-458a-ba35-72aa2bb9a267" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#ServiceEndpointOwner}</con:endpoint><con:request>{
    "firstName":"${#TestCase#randomFirstName}",
    "lastName":"${#TestCase#randomLastName}",
	"address": "${#TestCase#randomAdress}",
	"city": "${#TestCase#randomCity}",
	"telephone": "${#TestCase#randomTel}"
}</con:request><con:originalUri>http://localhost/owners</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="transfert idOwner" id="d7ee032e-01b3-4248-a664-0f4be0010c8f"><con:settings/><con:config><script>import groovy.json.*

// get the response from the first request using its name
def response = context.expand('${Add owner#Response}')
// parse it
def json = new JsonSlurper().parseText(response)
log.info json.id
// get the json value an set it as property in testCase
context.testCase.setPropertyValue("ownerId",json.id.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="Add pet" id="cc825661-4cf5-47d3-af11-5eed3ff575f0"><con:settings/><con:config service="http://localhost:54905" methodName="Add Pet" resourcePath="/owners/{ownerId}/pets" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Add pet" id="b544f7e8-362a-454f-a43d-d2d2c672598a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#ServiceEndpointOwner}</con:endpoint><con:request>{
	"name": "${#TestCase#randomPetName}",
	"birthDate": "${#TestCase#randomDate}"
}</con:request><con:originalUri>http://localhost/owners/ownerId/pets</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ownerId" value="${#TestCase#ownerId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="transfert idPet" id="f8c8eba5-53ad-4964-924e-e00c1dc8d3d2"><con:settings/><con:config><script>import groovy.json.*

// get the response from the first request using its name
def response = context.expand('${Add pet#Response}')
// parse it
def json = new JsonSlurper().parseText(response)
log.info json.id
// get the json value an set it as property in testCase
context.testCase.setPropertyValue("idPet",json.id.toString())</script></con:config></con:testStep><con:testStep type="restrequest" name="add visit" id="3c7bb285-f28a-45e4-b7a4-30273b4038ec"><con:settings/><con:config service="http://localhost:54778" methodName="Add visit" resourcePath="/owners/*/pets/{petId}/visits" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="add visit" id="cd79987e-5c2d-457d-9e40-3893f216800a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#ServiceEndpointVisit}</con:endpoint><con:request>{
	"date": "${#TestCase#randomVisitDate}",
	"description": "${#TestCase#randomDescription}"
}
</con:request><con:originalUri>http://localhost/owners/*/pets/2/visits</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="petId" value="${#TestCase#idPet}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="View Visit" id="584ee030-e87f-45f9-ab2a-66feca3c1368"><con:settings/><con:config service="http://localhost:54905" methodName="View Visit" resourcePath="/owners/*/pets/{petId}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="View Visit" id="f53f6e9a-20b4-4fb1-a98f-99a550cc6eb1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://${#Project#ServiceEndpointOwner}</con:endpoint><con:request/><con:originalUri>http://localhost/owners/*/pets/2</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="petId" value="${#TestCase#ownerId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>randomFirstName</con:name><con:value>ZV9DDw0Iz7zRYjq</con:value></con:property><con:property><con:name>randomLastName</con:name><con:value>GsvYx0JdBpGXZv2</con:value></con:property><con:property><con:name>randomCity</con:name><con:value>6Mh1FcC2jDSgjWw</con:value></con:property><con:property><con:name>randomTel</con:name><con:value>096553920</con:value></con:property><con:property><con:name>randomAdress</con:name><con:value>4 rue 15souq92CHlmAVK</con:value></con:property><con:property><con:name>randomPetName</con:name><con:value>QSxQWRDz</con:value></con:property><con:property><con:name>randomDate</con:name><con:value>2010-04-03</con:value></con:property><con:property><con:name>ownerId</con:name><con:value>7</con:value></con:property><con:property><con:name>idPet</con:name><con:value>7</con:value></con:property><con:property><con:name>randomVisitDate</con:name><con:value>2010-04-07</con:value></con:property><con:property><con:name>randomDescription</con:name><con:value>8POWyCF1tsWMEtc</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:endpointStrategy xsi:type="con:DefaultEndpointStrategy" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:endpoint mode="OVERRIDE">http://localhost:54778</con:endpoint></con:endpointStrategy><con:properties><con:property><con:name>ServiceEndpointOwner</con:name><con:value>localhost:57248</con:value></con:property><con:property><con:name>ServiceEndpointVisit</con:name><con:value>localhost:56631</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>